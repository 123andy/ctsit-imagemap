/*!
* imagemapster - v1.9.2 - 2024-12-31
* https://jamietre.github.io/ImageMapster
* Copyright (c) 2011 - 2024 James Treworgy
* License: MIT
*/ 
!function(e){"function"==typeof define&&define.amd?define(["jquery"],e):"object"==typeof module&&module.exports?module.exports=function(t,i){return void 0===i&&(i="undefined"!=typeof window?require("jquery"):require("jquery")(t)),e(i),i}:e(jQuery)}(function(e){var t,i,a,n,o,s,r,c,l,u,h,p,d,f,g,m,v,$,y;(t=e).event&&t.event.special&&function e(){var i=!1;try{var a=Object.defineProperty({},"passive",{get:function(){return i=!0,!0}});window.addEventListener("testPassive.mapster",function(){},a),window.removeEventListener("testPassive.mapster",function(){},a)}catch(n){}if(i){var o=function(e,t,i){if(!(e.includes("mapster")&&e.includes("noPreventDefault")))return!1;this.addEventListener(t,i,{passive:!0})};t.event.special.touchstart={setup:function(e,t,i){return o.call(this,t,"touchstart",i)}},t.event.special.touchend={setup:function(e,t,i){return o.call(this,t,"touchend",i)}}}}(),(i=e).fn.addBack=i.fn.addBack||i.fn.andSelf,i.fn.extend({actual:function(e,t){if(!this[e])throw'$.actual => The jQuery method "'+e+'" you called does not exist';var a=i.extend({absolute:!1,clone:!1,includeMargin:!1,display:"block"},t),n=this.eq(0);if(!0===a.clone)o=function(){n=n.clone().attr("style","position: absolute !important; top: -1000 !important; ").appendTo("body")},s=function(){n.remove()};else{var o,s,r,c=[],l="";o=function(){r=n.parents().addBack().filter(":hidden"),l+="visibility: hidden !important; display: "+a.display+" !important; ",!0===a.absolute&&(l+="position: absolute !important; "),r.each(function(){var e=i(this),t=e.attr("style");c.push(t),e.attr("style",t?t+";"+l:l)})},s=function(){r.each(function(e){var t=i(this),a=c[e];void 0===a?t.removeAttr("style"):t.attr("style",a)})}}o();var u=/(outer)/.test(e)?n[e](a.includeMargin):n[e]();return s(),u}}),(a=e).fn.mapster=function(e){var t=a.mapster.impl;return a.mapster.utils.isFunction(t[e])?t[e].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof e&&e?void a.error("Method "+e+" does not exist on jQuery.mapster"):t.bind.apply(this,arguments)},a.mapster={version:"1.9.2",render_defaults:{isSelectable:!0,isDeselectable:!0,fade:!1,fadeDuration:150,fill:!0,fillColor:"000000",fillColorMask:"FFFFFF",fillOpacity:.7,highlight:!0,stroke:!1,strokeColor:"ff0000",strokeOpacity:1,strokeWidth:1,includeKeys:"",altImage:null,altImageId:null,altImages:{},altImageOpacity:null},defaults:{clickNavigate:!1,navigateMode:"location",wrapClass:null,wrapCss:null,onGetList:null,sortList:!1,mapKey:"",mapValue:"",singleSelect:!1,listKey:"value",listSelectedAttribute:"selected",listSelectedClass:null,onClick:null,onMouseover:null,onMouseout:null,mouseoutDelay:0,onStateChange:null,boundList:null,onConfigured:null,configTimeout:3e4,noHrefIsMask:!0,scaleMap:!0,scaleMapBounds:{below:.98,above:1.02},enableAutoResizeSupport:!1,autoResize:!1,autoResizeDelay:0,autoResizeDuration:0,onAutoResize:null,areas:[]},shared_defaults:{render_highlight:{fade:!0},render_select:{fade:!1},staticState:null,selected:null},area_defaults:{includeKeys:"",isMask:!1},canvas_style:{position:"absolute",left:0,top:0,padding:0,border:0},hasCanvas:null,map_cache:[],hooks:{},addHook:function(e,t){this.hooks[e]=(this.hooks[e]||[]).push(t)},callHooks:function(e,t){a.each(this.hooks[e]||[],function(e,i){i.apply(t)})},utils:{when:{all:function(e){return Promise.all(e)},defer:function(){return new function(){this.promise=new Promise((function(e,t){this.resolve=e,this.reject=t}).bind(this)),this.then=this.promise.then.bind(this.promise),this.catch=this.promise.catch.bind(this.promise)}}},defer:function(){return this.when.defer()},subclass:function(e,t){var i=function(){var i=this,a=Array.prototype.slice.call(arguments,0);i.base=e.prototype,i.base.init=function(){e.prototype.constructor.apply(i,a)},t.apply(i,a)};return i.prototype=new e,i.prototype.constructor=i,i},asArray:function(e){return e.constructor===Array?e:this.split(e)},split:function(e,t){var i,a,n=e.split(",");for(i=0;i<n.length;i++)""===(a=n[i]?n[i].trim():"")?n.splice(i,1):n[i]=t?t(a):a;return n},updateProps:function(e,t){var i,n=e||{},o=a.isEmptyObject(n)?t:e;return i=[],a.each(o,function(e){i.push(e)}),a.each(Array.prototype.slice.call(arguments,1),function(e,t){a.each(t||{},function(e){if(!i||a.inArray(e,i)>=0){var o=t[e];a.isPlainObject(o)?n[e]=a.extend(n[e]||{},o):o&&o.constructor===Array?n[e]=o.slice(0):void 0!==o&&(n[e]=t[e])}})}),n},isElement:function(e){return"object"==typeof HTMLElement?e instanceof HTMLElement:e&&"object"==typeof e&&1===e.nodeType&&"string"==typeof e.nodeName},indexOf:function(e,t){if(Array.prototype.indexOf)return Array.prototype.indexOf.call(e,t);for(var i=0;i<e.length;i++)if(e[i]===t)return i;return -1},indexOfProp:function(e,t,i){var n=e.constructor===Array?-1:null;return a.each(e,function(e,a){if(a&&(t?a[t]:a)===i)return n=e,!1}),n},boolOrDefault:function(e,t){return this.isBool(e)?e:t||!1},isBool:function(e){return"boolean"==typeof e},isUndef:function(e){return void 0===e},isFunction:function(e){return"function"==typeof e},isNumeric:function(e){return!isNaN(parseFloat(e))},ifFunction:function(e,t,i){this.isFunction(e)&&e.call(t,i)},size:function(e,t){var i=a.mapster.utils;return{width:t?e.width||e.naturalWidth:i.imgWidth(e,!0),height:t?e.height||e.naturalHeight:i.imgHeight(e,!0),complete:function(){return!!this.height&&!!this.width}}},setOpacity:function(e,t){a.mapster.hasCanvas()?e.style.opacity=t:a(e).each(function(e,i){void 0!==i.opacity?i.opacity=t:a(i).css("opacity",t)})},fader:(n={},o=0,s=function(e,t,i,r){var c,l,u=r/15,h=a.mapster.utils;if("number"==typeof e){if(!(l=n[e]))return}else(c=h.indexOfProp(n,null,e))&&delete n[c],n[++o]=l=e,e=o;t=t+(i=i||1)/u>i-.01?i:t+i/u,h.setOpacity(l,t),t<i&&setTimeout(function(){s(e,t,i,r)},15)}),getShape:function(e){return(e.shape||"rect").toLowerCase()},hasAttribute:function(e,t){var i=a(e).attr(t);return void 0!==i&&!1!==i}},getBoundList:function(e,t){if(!e.boundList)return null;var i,n,o=a(),s=a.mapster.utils.split(t);return e.boundList.each(function(t,r){for(i=0;i<s.length;i++)n=s[i],a(r).is("["+e.listKey+'="'+n+'"]')&&(o=o.add(r))}),o},getMapDataIndex:function(e){var t,i;switch(e.tagName&&e.tagName.toLowerCase()){case"area":i=a(e).parent().attr("name"),t=a("img[usemap='#"+i+"']")[0];break;case"img":t=e}return t?this.utils.indexOfProp(this.map_cache,"image",t):-1},getMapData:function(e){var t=this.getMapDataIndex(e.length?e[0]:e);if(t>=0)return t>=0?this.map_cache[t]:null},queueCommand:function(e,t,i,a){return!!e&&(!e.complete||!!e.currentAction)&&(e.commands.push({that:t,command:i,args:a}),!0)},unload:function(){return this.impl.unload(),this.utils=null,this.impl=null,a.fn.mapster=null,a.mapster=null,a("*").off(".mapster")}},c=(r=a.mapster).utils,l=Array.prototype,a.each(["width","height"],function(e,t){var i=t.substr(0,1).toUpperCase()+t.substr(1);c["img"+i]=function(e,n){return(n?a(e)[t]():0)||e[t]||e["natural"+i]||e["client"+i]||e["offset"+i]}}),r.Method=function(e,t,i,a){var n=this;n.name=a.name,n.output=e,n.input=e,n.first=a.first||!1,n.args=a.args?l.slice.call(a.args,0):[],n.key=a.key,n.func_map=t,n.func_area=i,n.name=a.name,n.allowAsync=a.allowAsync||!1},r.Method.prototype={constructor:r.Method,go:function(){var e,t,i,n,o,s=this.input,c=[],l=this;for(e=0,n=s.length;e<n;e++)if(t=a.mapster.getMapData(s[e])){if(!l.allowAsync&&r.queueCommand(t,l.input,l.name,l.args)){this.first&&(o="");continue}if((i=t.getData("AREA"===s[e].nodeName?s[e]:this.key))?0>a.inArray(i,c)&&c.push(i):o=this.func_map.apply(t,l.args),this.first||void 0!==o)break}return(a(c).each(function(e,t){o=l.func_area.apply(t,l.args)}),void 0!==o)?o:this.output}},a.mapster.impl=function(){var e={},t=function(e){r.map_cache.splice(e.index,1);for(var t=r.map_cache.length-1;t>=e.index;t--)r.map_cache[t].index--};function i(){return"object"==typeof document.namespaces?document.namespaces:null}return e.get=function(e){var t=r.getMapData(this);if(!(t&&t.complete))throw"Can't access data until binding complete.";return new r.Method(this,function(){return this.getSelected()},function(){return this.isSelected()},{name:"get",args:arguments,key:e,first:!0,allowAsync:!0,defaultReturn:""}).go()},e.data=function(e){return new r.Method(this,null,function(){return this},{name:"data",args:arguments,key:e}).go()},e.highlight=function(e){return new r.Method(this,function(){if(!1===e)this.ensureNoHighlight();else{var t=this.highlightId;return t>=0?this.data[t].key:null}},function(){this.highlight()},{name:"highlight",args:arguments,key:e,first:!0}).go()},e.keys=function(e,t){var i=[],n=r.getMapData(this);if(!(n&&n.complete))throw"Can't access data until binding complete.";function o(e){var n,o=[];t?(n=e.areas(),a.each(n,function(e,t){o=o.concat(t.keys)})):o.push(e.key),a.each(o,function(e,t){0>a.inArray(t,i)&&i.push(t)})}return n&&n.complete?("string"==typeof e?t?o(n.getDataForKey(e)):i=[n.getKeysForGroup(e)]:(t=e,this.each(function(e,t){"AREA"===t.nodeName&&o(n.getDataForArea(t))})),i.join(",")):""},e.select=function(){e.set.call(this,!0)},e.deselect=function(){e.set.call(this,!1)},e.set=function(e,t,i){var n,o,s,l,u=i;function h(e){e&&0>a.inArray(e,l)&&(l.push(e),s+=(""===s?"":",")+e.key)}function p(t){a.each(l,function(t,i){!function t(i){var a=e;if(i){switch(e){case!0:i.select(u);break;case!1:i.deselect(!0);break;default:a=i.toggle(u)}return a}}(i)}),e||t.removeSelectionFinish()}return this.filter("img,area").each(function(i,d){var f;(o=r.getMapData(d))!==n&&(n&&p(n),l=[],s=""),o&&(f="","IMG"===d.nodeName.toUpperCase()?!r.queueCommand(o,a(d),"set",[e,t,u])&&(t instanceof Array?t.length&&(f=t.join(",")):f=t,f&&a.each(c.split(f),function(e,t){h(o.getDataForKey(t.toString())),n=o})):(u=t,r.queueCommand(o,a(d),"set",[e,u])||(h(o.getDataForArea(d)),n=o)))}),o&&p(o),this},e.unbind=function(e){return new r.Method(this,function(){this.clearEvents(),this.clearMapData(e),t(this)},null,{name:"unbind",args:arguments}).go()},e.rebind=function(e){return new r.Method(this,function(){var t=this;t.complete=!1,t.configureOptions(e),t.bindImages().then(function(){t.buildDataset(!0),t.complete=!0,t.onConfigured()})},null,{name:"rebind",args:arguments}).go()},e.get_options=function(e,t){var i=c.isBool(e)?e:t;return new r.Method(this,function(){var e=a.extend({},this.options);return i&&(e.render_select=c.updateProps({},r.render_defaults,e,e.render_select),e.render_highlight=c.updateProps({},r.render_defaults,e,e.render_highlight)),e},function(){return i?this.effectiveOptions():this.options},{name:"get_options",args:arguments,first:!0,allowAsync:!0,key:e}).go()},e.set_options=function(e){return new r.Method(this,function(){var t,i,n,o,s,r,l,u;t=this,i=e,delete(n=c.updateProps({},i)).areas,c.updateProps(t.options,n),o=t,s=i.areas,u=o.options.areas,s&&a.each(s,function(e,t){t&&t.key&&((l=c.indexOfProp(u,"key",t.key))>=0?a.extend(u[l],t):u.push(t),(r=o.getDataForKey(t.key))&&a.extend(r.options,t))}),c.updateProps(t.area_options,t.options)},null,{name:"set_options",args:arguments}).go()},e.unload=function(){var t;for(t=r.map_cache.length-1;t>=0;t--)r.map_cache[t]&&e.unbind.call(a(r.map_cache[t].image));e.graphics=null},e.snapshot=function(){return new r.Method(this,function(){a.each(this.data,function(e,t){t.selected=!1}),this.base_canvas=this.graphics.createVisibleCanvas(this),a(this.image).before(this.base_canvas)},null,{name:"snapshot"}).go()},e.state=function(){var e,t=null;return a(this).each(function(i,a){if("IMG"===a.nodeName)return(e=r.getMapData(a))&&(t=e.state()),!1}),t},e.bind=function(t){return this.each(function(i,n){var o,s,c,l,u;if(o=a(n),l=r.getMapData(n)){if(e.unbind.apply(o),!l.complete&&r.queueCommand(l,o,"bind",[t]))return!0;l=null}if(s=(c=this.getAttribute("usemap"))&&a('map[name="'+c.substr(1)+'"]'),!(o.is("img")&&c&&s.length>0))return!0;o.css("border",0),!l&&((l=new r.MapData(this,t)).index=(u=l,r.map_cache.push(u)-1),l.map=s,l.bindImages().then(function(){l.initialize()}))})},e.init=function(e){var t,n;r.hasCanvas=function(){if(!c.isBool(r.hasCanvas.value)){var t;r.hasCanvas.value=c.isBool(e)?e:(!(t=i())||!t.g_vml_)&&!!a("<canvas />")[0].getContext}return r.hasCanvas.value},r.hasVml=function(){if(!c.isBool(r.hasVml.value)){var e,o,s,l=i();l&&!l.v&&(l.add("v","urn:schemas-microsoft-com:vml"),t=document.createStyleSheet(),n=["shape","rect","oval","circ","fill","stroke","imagedata","group","textbox"],a.each(n,function(e,i){t.addRule("v\\:"+i,"behavior: url(#default#VML); antialias:true")})),r.hasVml.value=((e=a("<div />").appendTo("body")).html('<v:shape id="vml_flag1" adj="1" />'),(o=e[0].firstChild).style.behavior="url(#default#VML)",s=!o||"object"==typeof o.adj,e.remove(),s)}return r.hasVml.value},a.extend(r.defaults,r.render_defaults,r.shared_defaults),a.extend(r.area_defaults,r.render_defaults,r.shared_defaults)},e}(),a.mapster.impl.init(),function(e){"use strict";var t,i,a,n=e.mapster,o=n.utils;function s(t,i,a){var n=t,o=n.map_data,s=a.isMask;e.each(i.areas(),function(e,t){a.isMask=s||t.nohref&&o.options.noHrefIsMask,n.addShape(t,a)}),a.isMask=s}function r(e){return Math.max(0,Math.min(parseInt(e,16),255))}function c(e,t){return"rgba("+r(e.substr(0,2))+","+r(e.substr(2,2))+","+r(e.substr(4,2))+","+t+")"}function l(){}n.Graphics=function(e){var t=this;t.active=!1,t.canvas=null,t.width=0,t.height=0,t.shapes=[],t.masks=[],t.map_data=e},t=n.Graphics.prototype={constructor:n.Graphics,begin:function(t,i){var a=e(t);this.elementName=i,this.canvas=t,this.width=a.width(),this.height=a.height(),this.shapes=[],this.masks=[],this.active=!0},addShape:function(e,t){(t.isMask?this.masks:this.shapes).push({mapArea:e,options:t})},createVisibleCanvas:function(t){return e(this.createCanvasFor(t)).addClass("mapster_el").css(n.canvas_style)[0]},addShapeGroup:function(t,i,a){var r,c,l,u=this,h=this.map_data,p=t.effectiveRenderOptions(i);a&&e.extend(p,a),"select"===i?(c="static_"+t.areaId.toString(),l=h.base_canvas):l=h.overlay_canvas,u.begin(l,c),p.includeKeys&&(r=o.split(p.includeKeys),e.each(r,function(e,t){var a=h.getDataForKey(t.toString());s(u,a,a.effectiveRenderOptions(i))})),s(u,t,p),u.render(),p.fade&&o.fader(n.hasCanvas()?l:e(l).find("._fill").not(".mapster_mask"),0,n.hasCanvas()?1:p.fillOpacity,p.fadeDuration)}},i={renderShape:function(e,t,i){var a,n=t.coords(null,i);switch(t.shape){case"rect":case"rectangle":e.rect(n[0],n[1],n[2]-n[0],n[3]-n[1]);break;case"poly":case"polygon":for(e.moveTo(n[0],n[1]),a=2;a<t.length;a+=2)e.lineTo(n[a],n[a+1]);e.lineTo(n[0],n[1]);break;case"circ":case"circle":e.arc(n[0],n[1],n[2],0,2*Math.PI,!1)}},addAltImage:function(e,t,i,a){e.beginPath(),this.renderShape(e,i),e.closePath(),e.clip(),e.globalAlpha=a.altImageOpacity||a.fillOpacity,e.drawImage(t,0,0,i.owner.scaleInfo.width,i.owner.scaleInfo.height)},render:function(){var t,i,a=this,n=a.map_data,o=a.masks.length,s=a.createCanvasFor(n),r=s.getContext("2d"),l=a.canvas.getContext("2d");return o&&((i=(t=a.createCanvasFor(n)).getContext("2d")).clearRect(0,0,t.width,t.height),e.each(a.masks,function(e,t){i.save(),i.beginPath(),a.renderShape(i,t.mapArea),i.closePath(),i.clip(),i.lineWidth=0,i.fillStyle="#000",i.fill(),i.restore()})),e.each(a.shapes,function(e,t){r.save(),t.options.fill&&(t.options.altImageId?a.addAltImage(r,n.images[t.options.altImageId],t.mapArea,t.options):(r.beginPath(),a.renderShape(r,t.mapArea),r.closePath(),r.fillStyle=c(t.options.fillColor,t.options.fillOpacity),r.fill())),r.restore()}),e.each(a.shapes.concat(a.masks),function(e,t){var i=1===t.options.strokeWidth?.5:0;t.options.stroke&&(r.save(),r.strokeStyle=c(t.options.strokeColor,t.options.strokeOpacity),r.lineWidth=t.options.strokeWidth,r.beginPath(),a.renderShape(r,t.mapArea,i),r.closePath(),r.stroke(),r.restore())}),o?(i.globalCompositeOperation="source-out",i.drawImage(s,0,0),l.drawImage(t,0,0)):l.drawImage(s,0,0),a.active=!1,a.canvas},createCanvasFor:function(t){return e('<canvas width="'+t.scaleInfo.width+'" height="'+t.scaleInfo.height+'"></canvas>')[0]},clearHighlight:function(){var e=this.map_data.overlay_canvas;e.getContext("2d").clearRect(0,0,e.width,e.height)},refreshSelections:function(){var t,i=this.map_data;t=i.base_canvas,i.base_canvas=this.createVisibleCanvas(i),e(i.base_canvas).hide(),e(t).before(i.base_canvas),i.redrawSelections(),e(i.base_canvas).show(),e(t).remove()}},a={renderShape:function(t,i,a){var n,o,s,r,c,l,u,h=t.coords();switch(c=this.elementName?'name="'+this.elementName+'" ':"",l=a?'class="'+a+'" ':"",r='<v:fill color="#'+i.fillColor+'" class="_fill" opacity="'+(i.fill?i.fillOpacity:0)+'" /><v:stroke class="_fill" opacity="'+i.strokeOpacity+'"/>',o=i.stroke?" strokeweight="+i.strokeWidth+' stroked="t" strokecolor="#'+i.strokeColor+'"':' stroked="f"',n=i.fill?' filled="t"':' filled="f"',t.shape){case"rect":case"rectangle":u="<v:rect "+l+c+n+o+' style="zoom:1;margin:0;padding:0;display:block;position:absolute;left:'+h[0]+"px;top:"+h[1]+"px;width:"+(h[2]-h[0])+"px;height:"+(h[3]-h[1])+'px;">'+r+"</v:rect>";break;case"poly":case"polygon":u="<v:shape "+l+c+n+o+' coordorigin="0,0" coordsize="'+this.width+","+this.height+'" path="m '+h[0]+","+h[1]+" l "+h.slice(2).join(",")+' x e" style="zoom:1;margin:0;padding:0;display:block;position:absolute;top:0px;left:0px;width:'+this.width+"px;height:"+this.height+'px;">'+r+"</v:shape>";break;case"circ":case"circle":u="<v:oval "+l+c+n+o+' style="zoom:1;margin:0;padding:0;display:block;position:absolute;left:'+(h[0]-h[2])+"px;top:"+(h[1]-h[2])+"px;width:"+2*h[2]+"px;height:"+2*h[2]+'px;">'+r+"</v:oval>"}return s=e(u),e(this.canvas).append(s),s},render:function(){var t,i=this;return e.each(this.shapes,function(e,t){i.renderShape(t.mapArea,t.options)}),this.masks.length&&e.each(this.masks,function(e,a){t=o.updateProps({},a.options,{fillOpacity:1,fillColor:a.options.fillColorMask}),i.renderShape(a.mapArea,t,"mapster_mask")}),this.active=!1,this.canvas},createCanvasFor:function(t){var i=t.scaleInfo.width,a=t.scaleInfo.height;return e('<var width="'+i+'" height="'+a+'" style="zoom:1;overflow:hidden;display:block;width:'+i+"px;height:"+a+'px;"></var>')[0]},clearHighlight:function(){e(this.map_data.overlay_canvas).children().remove()},removeSelections:function(t){t>=0?e(this.map_data.base_canvas).find('[name="static_'+t.toString()+'"]').remove():e(this.map_data.base_canvas).children().remove()}},e.each(["renderShape","addAltImage","render","createCanvasFor","clearHighlight","removeSelections","refreshSelections"],function(e,o){var s;t[o]=(s=o,function(){return t[s]=(n.hasCanvas()?i[s]:a[s])||l,t[s].apply(this,arguments)})})}(e),p=(h=(u=e).mapster).utils,d=[],h.MapImages=function(e){this.owner=e,this.clear()},h.MapImages.prototype={constructor:h.MapImages,slice:function(){return d.slice.apply(this,arguments)},splice:function(){d.slice.apply(this.status,arguments);var e=d.slice.apply(this,arguments);return e},complete:function(){return 0>u.inArray(!1,this.status)},_add:function(e){var t=d.push.call(this,e)-1;return this.status[t]=!1,t},indexOf:function(e){return p.indexOf(this,e)},clear:function(){var e=this;e.ids&&e.ids.length>0&&u.each(e.ids,function(t,i){delete e[i]}),e.ids=[],e.length=0,e.status=[],e.splice(0)},add:function(e,t){var i,a,n=this;if(e){if("string"==typeof e){if("object"==typeof(e=n[a=e]))return n.indexOf(e);e=u("<img />").addClass("mapster_el").hide(),i=n._add(e[0]),e.on("load.mapster",function(e){n.imageLoaded.call(n,e)}).on("error.mapster",function(e){n.imageLoadError.call(n,e)}),e.attr("src",a)}else i=n._add(u(e)[0]);if(t){if(this[t])throw t+" is already used or is not available as an altImage alias.";n.ids.push(t),n[t]=n[i]}return i}},bind:function(){var e,t=this,i=t.owner.options.configTimeout/50,a=function(){var e;for(e=t.length;e-- >0&&t.isLoaded(e););t.complete()?t.resolve():i-- >0?t.imgTimeout=window.setTimeout(function(){a.call(t,!0)},50):t.imageLoadError.call(t)};return e=t.deferred=p.defer(),a(),e},resolve:function(){var e=this,t=e.deferred;t&&(e.deferred=null,t.resolve())},imageLoaded:function(e){var t=this,i=t.indexOf(e.target);i>=0&&(t.status[i]=!0,0>u.inArray(!1,t.status)&&t.resolve())},imageLoadError:function(e){throw clearTimeout(this.imgTimeout),this.triesLeft=0,e?"The image "+e.target.src+" failed to load.":"The images never seemed to finish loading. You may just need to increase the configTimeout if images could take a long time to load."},isLoaded:function(e){var t,i=this.status;return!!i[e]||(void 0!==(t=this[e]).complete?i[e]=t.complete:i[e]=!!p.imgWidth(t),i[e])}},function(e){"use strict";var t=e.mapster,i=t.utils;function a(e){return!!e&&"#"!==e}function n(e){t.hasCanvas()||this.blur(),e.preventDefault()}function o(t,a){var n=t.getAllDataForArea(this),o=n.length?n[0]:null;!(!o||o.isNotRendered())&&!o.owner.currentAction&&t.currentAreaId!==o.areaId&&(t.highlightId!==o.areaId&&(t.clearEffects(),o.highlight(),t.options.showToolTip&&e.each(n,function(e,t){t.effectiveOptions().toolTip&&t.showToolTip()})),t.currentAreaId=o.areaId,i.isFunction(t.options.onMouseover)&&t.options.onMouseover.call(this,{e:a,options:o.effectiveOptions(),key:o.key,selected:o.isSelected()}))}function s(e,t){var a,n=e.getDataForArea(this),o=e.options;!(e.currentAreaId<0)&&n&&(a=e.getDataForArea(t.relatedTarget))!==n&&(e.currentAreaId=-1,n.area=null,(function e(t,a,n,o){if(o=o||i.when.defer(),t.activeAreaEvent&&(window.clearTimeout(t.activeAreaEvent),t.activeAreaEvent=0),a<0)o.resolve({completeAction:!1});else if(n.owner.currentAction||a)t.activeAreaEvent=window.setTimeout(function(){e(t,0,n,o)},a||100);else{var s;s=n.areaId,t.currentAreaId!==s&&t.highlightId>=0&&o.resolve({completeAction:!0})}return o})(e,o.mouseoutDelay,n).then(function(t){t.completeAction&&e.clearEffects()}),i.isFunction(o.onMouseout)&&o.onMouseout.call(this,{e:t,options:o,key:n.key,selected:n.isSelected()}))}function r(t){var i=t.options;t.ensureNoHighlight(),i.toolTipClose&&e.inArray("area-mouseout",i.toolTipClose)>=0&&t.activeToolTip&&t.clearToolTip()}function c(o,s){var r,c,l,u,h,p,d,f=this,g=o.getDataForArea(this),m=o.options;function v(e,t,i){if("open"===e){window.open(t,i||"_self");return}window.location.href=t}function $(t,i,n){if("open"===i){var o=e(t.area).attr("href"),s=a(o);return{href:s?o:t.href,target:s?e(t.area).attr("target"):t.hrefTarget}}return{href:n}}function y(n){var o;if(l=(u=n.isSelectable()&&(n.isDeselectable()||!n.isSelected()))?!n.isSelected():n.isSelected(),c=t.getBoundList(m,n.key),i.isFunction(m.onClick)&&(h=m.onClick.call(f,{e:s,listTarget:c,key:n.key,selected:l}),i.isBool(h))){if(!h)return!1;if(o=$(n,m.navigateMode,e(n.area).attr("href")),a(o.href))return v(m.navigateMode,o.href,o.target),!1}u&&n.toggle()}if(n.call(this,s),p=$(g,m.navigateMode,g.href),m.clickNavigate&&a(p.href)){v(m.navigateMode,p.href,p.target);return}g&&!g.owner.currentAction&&(m=o.options,y(g),(d=g.effectiveOptions()).includeKeys&&(r=i.split(d.includeKeys),e.each(r,function(e,t){var i=o.getDataForKey(t.toString());i.options.isMask||y(i)})))}t.MapData=function(i,a){var l,u=this;u.image=i,u.images=new t.MapImages(u),u.graphics=new t.Graphics(u),u.imgCssText=i.style.cssText||null,l=u,e.extend(l,{complete:!1,map:null,base_canvas:null,overlay_canvas:null,commands:[],data:[],mapAreas:[],_xref:{},highlightId:-1,currentAreaId:-1,_tooltip_events:[],scaleInfo:null,index:-1,activeAreaEvent:null,autoResizeTimer:null}),u.configureOptions(a),u.mouseover=function(e){o.call(this,u,e)},u.mouseout=function(e){s.call(this,u,e)},u.click=function(e){c.call(this,u,e)},u.clearEffects=function(e){r.call(this,u,e)},u.mousedown=function(e){n.call(this,e)}},t.MapData.prototype={constructor:t.MapData,configureOptions:function(e){this.options=i.updateProps({},t.defaults,e)},bindImages:function(){var a,n,o,s=this.images;return s.length>2?s.splice(2):0===s.length&&(s.add(this.image),s.add(this.image.src)),a=this,n=a.options,o=a.images,t.hasCanvas()&&(e.each(n.altImages||{},function(e,t){o.add(t,e)}),e.each([n].concat(n.areas),function(t,i){var a;e.each([a=i,a.render_highlight,a.render_select],function(e,t){t&&t.altImage&&(t.altImageId=o.add(t.altImage))})})),a.area_options=i.updateProps({},t.area_defaults,n),this.images.bind()},isActive:function(){return!this.complete||this.currentAction},state:function(){return{complete:this.complete,resizing:"resizing"===this.currentAction,zoomed:this.zoomed,zoomedArea:this.zoomedArea,scaleInfo:this.scaleInfo}},wrapId:function(){return"mapster_wrap_"+this.index},instanceEventNamespace:function(){return".mapster."+this.wrapId()},_idFromKey:function(e){return"string"==typeof e&&Object.prototype.hasOwnProperty.call(this._xref,e)?this._xref[e]:-1},getSelected:function(){var t="";return e.each(this.data,function(e,i){i.isSelected()&&(t+=(t?",":"")+this.key)}),t},getAllDataForArea:function(t,a){var n,o,s,r=e(t).filter("area").attr(this.options.mapKey);if(r)for(n=0,s=[],r=i.split(r);n<(a||r.length);n++)(o=this.data[this._idFromKey(r[n])])&&(o.area=t.length?t[0]:t,s.push(o));return s},getDataForArea:function(e){var t=this.getAllDataForArea(e,1);return t&&t[0]||null},getDataForKey:function(e){return this.data[this._idFromKey(e)]},getKeysForGroup:function(e){var t=this.getDataForKey(e);return t?t.isPrimary?t.key:this.getPrimaryKeysForMapAreas(t.areas()).join(","):""},getPrimaryKeysForMapAreas:function(t){var i=[];return e.each(t,function(t,a){0>e.inArray(a.keys[0],i)&&i.push(a.keys[0])}),i},getData:function(e){return"string"==typeof e?this.getDataForKey(e):e&&e.mapster||i.isElement(e)?this.getDataForArea(e):null},ensureNoHighlight:function(){var e;this.highlightId>=0&&(this.graphics.clearHighlight(),(e=this.data[this.highlightId]).changeState("highlight",!1),this.setHighlightId(-1))},setHighlightId:function(e){this.highlightId=e},clearSelections:function(){e.each(this.data,function(e,t){t.selected&&t.deselect(!0)}),this.removeSelectionFinish()},setAreaOptions:function(e){var t,a,n;for(t=(e=e||[]).length-1;t>=0;t--)(a=e[t])&&(n=this.getDataForKey(a.key))&&(i.updateProps(n.options,a),i.isBool(a.selected)&&(n.selected=a.selected))},drawSelections:function(e){var t,a=i.asArray(e);for(t=a.length-1;t>=0;t--)this.data[a[t]].drawSelection()},redrawSelections:function(){e.each(this.data,function(e,t){t.isSelectedOrStatic()&&t.drawSelection()})},setBoundListProperties:function(t,i,a){i.each(function(i,n){t.listSelectedClass&&(a?e(n).addClass(t.listSelectedClass):e(n).removeClass(t.listSelectedClass)),t.listSelectedAttribute&&e(n).prop(t.listSelectedAttribute,a)})},clearBoundListProperties:function(e){e.boundList&&this.setBoundListProperties(e,e.boundList,!1)},refreshBoundList:function(e){this.clearBoundListProperties(e),this.setBoundListProperties(e,t.getBoundList(e,this.getSelected()),!0)},setBoundList:function(e){var t,i=this,a=i.data.slice(0);e.sortList&&(t="desc"===e.sortList?function(e,t){return e===t?0:e>t?-1:1}:function(e,t){return e===t?0:e<t?-1:1},a.sort(function(e,i){return t(e=e.value,i=i.value)})),i.options.boundList=e.onGetList.call(i.image,a)},initialize:function(){var a,n,o,s,r,c,l,u,h,p,d=this,f=d.options;if(!d.complete){for((r=(h=e(d.image)).parent().attr("id"))&&r.length>=12&&"mapster_wrap"===r.substring(0,12)?(s=h.parent()).attr("id",d.wrapId()):(s=e('<div id="'+d.wrapId()+'"></div>'),f.wrapClass&&(!0===f.wrapClass?s.addClass(h[0].className):s.addClass(f.wrapClass))),d.wrapper=s,d.scaleInfo=p=i.scaleMap(d.images[0],d.images[1],f.scaleMap,f.scaleMapBounds),d.base_canvas=n=d.graphics.createVisibleCanvas(d),d.overlay_canvas=o=d.graphics.createVisibleCanvas(d),a=e(d.images[1]).addClass("mapster_el "+d.images[0].className).attr({id:null,usemap:null}),(u=i.size(d.images[0])).complete&&a.css({width:u.width,height:u.height}),d.buildDataset(),c=e.extend({display:"block",position:"relative",padding:0},!0===f.enableAutoResizeSupport?{}:{width:p.width,height:p.height}),f.wrapCss&&e.extend(c,f.wrapCss),h.parent()[0]!==d.wrapper[0]&&h.before(d.wrapper),s.css(c),e(d.images.slice(2)).hide(),l=1;l<d.images.length;l++)s.append(d.images[l]);s.append(n).append(o).append(h.css(t.canvas_style)),i.setOpacity(d.images[0],0),e(d.images[1]).show(),i.setOpacity(d.images[1],1),d.complete=!0,d.processCommandQueue(),!0===f.enableAutoResizeSupport&&d.configureAutoResize(),d.onConfigured()}},onConfigured:function(){var t=e(this.image),a=this.options;i.isFunction(a.onConfigured)&&a.onConfigured.call(t,!0)},buildDataset:function(i){var n,o,s,r,c,l,u,h,p,d,f,g,m,v,$,y=this,b=y.options;function w(e,i){var a=new t.AreaData(y,e,i);return a.areaId=y._xref[e]=y.data.push(a)-1,a.areaId}for(y._xref={},y.data=[],i||(y.mapAreas=[]),($=!b.mapKey)&&(b.mapKey="data-mapster-key"),n=t.hasVml()?"area":$?"area[coords]":"area["+b.mapKey+"]",o=e(y.map).find(n).off(".mapster"),f=0;f<o.length;f++)if(r=0,c=e(l=o[f]),l.coords){for($?(u=String(f),c.attr("data-mapster-key",u)):u=l.getAttribute(b.mapKey),i?((h=y.mapAreas[c.data("mapster")-1]).configure(u),h.areaDataXref=[]):(h=new t.MapArea(y,l,u),y.mapAreas.push(h)),s=(d=h.keys).length-1;s>=0;s--)p=d[s],b.mapValue&&(g=c.attr(b.mapValue)),$?(r=w(y.data.length,g),(m=y.data[r]).key=p=r.toString()):(r=y._xref[p])>=0?(m=y.data[r],g&&!y.data[r].value&&(m.value=g)):(r=w(p,g),(m=y.data[r]).isPrimary=0===s),h.areaDataXref.push(r),m.areasXref.push(f);a(v=c.attr("href"))&&!m.href&&(m.href=v,m.hrefTarget=c.attr("target")),h.nohref||c.on("click.mapster",y.click).on("mouseover.mapster touchstart.mapster.noPreventDefault",y.mouseover).on("mouseout.mapster touchend.mapster.noPreventDefault",y.mouseout).on("mousedown.mapster",y.mousedown),c.data("mapster",f+1)}y.setAreaOptions(b.areas),b.onGetList&&y.setBoundList(b),b.boundList&&b.boundList.length>0&&y.refreshBoundList(b),i?(y.graphics.removeSelections(),y.graphics.refreshSelections()):y.redrawSelections()},processCommandQueue:function(){for(var e;!this.currentAction&&this.commands.length;)e=this.commands[0],this.commands.splice(0,1),t.impl[e.command].apply(e.that,e.args)},clearEvents:function(){e(this.map).find("area").off(".mapster"),e(this.images).off(".mapster"),e(window).off(this.instanceEventNamespace()),e(window.document).off(this.instanceEventNamespace())},_clearCanvases:function(t){t||e(this.base_canvas).remove(),e(this.overlay_canvas).remove()},clearMapData:function(t){var a=this;a.ensureNoHighlight(),this._clearCanvases(t),e.each(this.data,function(e,t){t.reset()}),this.data=null,t||(this.image.style.cssText=this.imgCssText,e(this.wrapper).before(this.image).remove()),a.images.clear(),a.autoResizeTimer&&clearTimeout(a.autoResizeTimer),a.autoResizeTimer=null,this.image=null,i.ifFunction(this.clearToolTip,this)},removeSelectionFinish:function(){var e=this.graphics;e.refreshSelections(),e.clearHighlight()}}}(e),function(e){"use strict";var t=e.mapster,i=t.utils;function a(e,t){return e===t}function n(t){var a=e(t);return i.hasAttribute(a,"nohref")||!i.hasAttribute(a,"href")}t.AreaData=function(t,i,a){e.extend(this,{owner:t,key:i||"",isPrimary:!0,areaId:-1,href:"",hrefTarget:null,value:a||"",options:{},selected:null,staticStateOverridden:!1,areasXref:[],area:null,optsCache:null})},t.AreaData.prototype={constuctor:t.AreaData,select:function t(i){var a,n,o=this,s=o.owner,r=!e.isEmptyObject(i),c=r?e.extend(o.effectiveRenderOptions("select"),i,{altImageId:s.images.add(i.altImage)}):null,l=!!r&&(a=o.optsCache,n=c,a!==n),u=!1,h=o.isSelectedOrStatic();s.options.singleSelect&&(s.clearSelections(),h=o.isSelectedOrStatic()),l&&(o.optsCache=c),u=o.updateSelected(!0),h&&l?(s.graphics.removeSelections(o.areaId),s.graphics.refreshSelections()):h||o.drawSelection(),u&&o.changeState("select",!0)},deselect:function e(t){var i=this,a=!1;a=i.updateSelected(!1),i.optsCache=null,i.owner.graphics.removeSelections(i.areaId),t||i.owner.removeSelectionFinish(),a&&i.changeState("select",!1)},toggle:function e(t){return this.isSelected()?this.deselect():this.select(t),this.isSelected()},updateSelected:function e(t){var a=this,n=a.selected;return a.selected=t,a.staticStateOverridden=!!i.isBool(a.effectiveOptions().staticState),n!==t},areas:function(){var e,t=[];for(e=0;e<this.areasXref.length;e++)t.push(this.owner.mapAreas[this.areasXref[e]]);return t},coords:function(t){var i=[];return e.each(this.areas(),function(e,a){i=i.concat(a.coords(t))}),i},reset:function(){e.each(this.areas(),function(e,t){t.reset()}),this.areasXref=[],this.options=null},isSelectedOrStatic:function(){var e=this.effectiveOptions();return!i.isBool(e.staticState)||this.staticStateOverridden?this.isSelected():e.staticState},isSelected:function(){return i.isBool(this.selected)?this.selected:!!i.isBool(this.owner.area_options.selected)&&this.owner.area_options.selected},isSelectable:function(){return!i.isBool(this.effectiveOptions().staticState)&&!i.isBool(this.owner.options.staticState)&&i.boolOrDefault(this.effectiveOptions().isSelectable,!0)},isDeselectable:function(){return!i.isBool(this.effectiveOptions().staticState)&&!i.isBool(this.owner.options.staticState)&&i.boolOrDefault(this.effectiveOptions().isDeselectable,!0)},isNotRendered:function(){return n(this.area)||this.effectiveOptions().isMask},effectiveOptions:function(e){var t=i.updateProps({},this.owner.area_options,this.options,e||{},{id:this.areaId});return t.selected=this.isSelected(),t},effectiveRenderOptions:function(t,a){var n,o=this.optsCache;return o&&"highlight"!==t||(n=this.effectiveOptions(a),o=i.updateProps({},n,n["render_"+t]),"highlight"===t||(this.optsCache=o)),e.extend({},o)},changeState:function(e,a){i.isFunction(this.owner.options.onStateChange)&&this.owner.options.onStateChange.call(this.owner.image,{key:this.key,state:e,selected:a}),"select"===e&&this.owner.options.boundList&&this.owner.setBoundListProperties(this.owner.options,t.getBoundList(this.owner.options,this.key),a)},highlight:function(e){var t=this.owner;t.ensureNoHighlight(),this.effectiveOptions().highlight&&t.graphics.addShapeGroup(this,"highlight",e),t.setHighlightId(this.areaId),this.changeState("highlight",!0)},drawSelection:function(){this.owner.graphics.addShapeGroup(this,"select")}},t.MapArea=function(t,a,o){if(t){var s=this;s.owner=t,s.area=a,s.areaDataXref=[],s.originalCoords=[],e.each(i.split(a.coords),function(e,t){s.originalCoords.push(parseFloat(t))}),s.length=s.originalCoords.length,s.shape=i.getShape(a),s.nohref=n(a),s.configure(o)}},t.MapArea.prototype={constructor:t.MapArea,configure:function(e){this.keys=i.split(e)},reset:function(){this.area=null},coords:function(t){return e.map(this.originalCoords,function(e){return t?e:e+t})}}}(e),(g=(f=e).mapster.utils).areaCorners=function(e,t,i,a,n){var o,s,r,c,l,u,h,p,d,m,v,$,y,b,w,_,k,S,A,C,T=0,x=0,I=[];for(e=e.length?e:[e],w=(o=(i=i?f(i):f(document.body)).offset()).left,_=o.top,t&&(T=(o=f(t).offset()).left,x=o.top),b=0;b<e.length;b++)if("AREA"===(C=e[b]).nodeName){switch(k=g.split(C.coords,parseInt),g.getShape(C)){case"circle":case"circ":for(b=0,v=k[0],$=k[1],S=k[2],I=[];b<360;b+=20)A=b*Math.PI/180,I.push(v+S*Math.cos(A),$+S*Math.sin(A));break;case"rectangle":case"rect":I.push(k[0],k[1],k[2],k[1],k[2],k[3],k[0],k[3]);break;default:I=I.concat(k)}for(b=0;b<I.length;b+=2)I[b]=parseInt(I[b],10)+T,I[b+1]=parseInt(I[b+1],10)+x}else o=(C=f(C)).position(),I.push(o.left,o.top,o.left+C.width(),o.top,o.left+C.width(),o.top+C.height(),o.left,o.top+C.height());for(r=c=h=d=999999,l=u=p=m=-1,b=I.length-2;b>=0;b-=2)v=I[b],$=I[b+1],v<r&&(r=v,m=$),v>l&&(l=v,d=$),$<c&&(c=$,p=v),$>u&&(u=$,h=v);return a&&n&&(s=!1,f.each([[p-a,c-n],[h,c-n],[r-a,m-n],[r-a,d],[l,m-n],[l,d],[p-a,u],[h,u]],function(e,t){if(!s&&t[0]>w&&t[1]>_)return y=t,s=!0,!1}),s||(y=[l,u])),y},$=(v=(m=e).mapster).utils,y=v.MapArea.prototype,v.utils.getScaleInfo=function(e,t,i){var a;return t?(a=e.width/t.width||e.height/t.height,i&&a>i.below&&a<i.above&&(a=1)):(a=1,t=e),{scale:1!==a,scalePct:a,realWidth:t.width,realHeight:t.height,width:e.width,height:e.height,ratio:e.width/e.height}},v.utils.scaleMap=function(e,t,i,a){var n=$.size(e),o=$.size(t,!0);if(!o.complete())throw"Another script, such as an extension, appears to be interfering with image loading. Please let us know about this.";return n.complete()||(n=o),this.getScaleInfo(n,i?o:null,a)},v.MapData.prototype.resize=function(e,t,i,a){var n,o,s,r,c,l,u=this;function h(e,t,i){v.hasCanvas()?(e.width=t,e.height=i):(m(e).width(t),m(e).height(i))}function p(){if(h(u.overlay_canvas,e,t),c>=0){var i=u.data[c];i.tempOptions={fade:!1},u.getDataForKey(i.key).highlight(),i.tempOptions=null}h(u.base_canvas,e,t),u.redrawSelections(),u.currentAction="",$.isFunction(a)&&a(),u.processCommandQueue()}function d(){m(u.image).css(s),u.scaleInfo=$.getScaleInfo({width:e,height:t},{width:u.scaleInfo.realWidth,height:u.scaleInfo.realHeight},u.options.scaleMapBounds),m.each(u.data,function(e,t){m.each(t.areas(),function(e,t){t.resize()})})}a=a||i,i=$.isNumeric(i)?i:0,(u.scaleInfo.width!==e||u.scaleInfo.height!==t)&&(c=u.highlightId,e||(l=t/u.scaleInfo.realHeight,e=Math.round(u.scaleInfo.realWidth*l)),t||(l=e/u.scaleInfo.realWidth,t=Math.round(u.scaleInfo.realHeight*l)),s={width:String(e)+"px",height:String(t)+"px"},v.hasCanvas()||m(u.base_canvas).children().remove(),r=m(u.wrapper).find(".mapster_el"),!0!==u.options.enableAutoResizeSupport&&(r=r.add(u.wrapper)),i?(o=[],u.currentAction="resizing",r.filter(":visible").each(function(e,t){n=$.defer(),o.push(n),m(t).animate(s,{duration:i,complete:n.resolve,easing:"linear"})}),r.filter(":hidden").css(s),n=$.defer(),o.push(n),$.when.all(o).then(p),d(),n.resolve()):(r.css(s),d(),p()))},v.MapData.prototype.autoResize=function(e,t){this.resize(m(this.wrapper).width()||m(this.wrapper).actual("width"),null,e,t)},v.MapData.prototype.configureAutoResize=function(){var e=this,t=e.instanceEventNamespace();function i(){!0===e.options.autoResize&&e.autoResize(e.options.autoResizeDuration,e.options.onAutoResize)}m(e.image).on("load"+t,i),m(window).on("focus"+t,i),m(window).on("resize"+t,function t(){e.autoResizeTimer&&clearTimeout(e.autoResizeTimer),e.autoResizeTimer=setTimeout(i,e.options.autoResizeDelay)}),m(window).on("readystatechange"+t,i),m(window.document).on("fullscreenchange"+t,i),i()},v.MapArea=$.subclass(v.MapArea,function(){this.base.init(),this.owner.scaleInfo.scale&&this.resize()}),y.coords=function(e,t){var i,a=[],n=e||this.owner.scaleInfo.scalePct,o=t||0;if(1===n&&0===t)return this.originalCoords;for(i=0;i<this.length;i++)a.push(Math.round(this.originalCoords[i]*n)+o);return a},y.resize=function(){this.area.coords=this.coords().join(",")},y.reset=function(){this.area.coords=this.coords(1).join(",")},v.impl.resize=function(e,t,i,a){var n=new v.Method(this,function(){var n=!e&&!t;if(this.options.enableAutoResizeSupport&&this.options.autoResize&&n){this.autoResize(i,a);return}if(n)return!1;this.resize(e,t,i,a)},null,{name:"resize",args:arguments}).go();return n},function(e){"use strict";var t=e.mapster,i=t.utils;function a(t,i,a){var n;return i?(n="string"==typeof i?e(i):e(i).clone()).append(t):n=e(t),n.css(e.extend(a||{},{display:"block",position:"absolute"})).hide(),e("body").append(n),n.attr("data-opacity",n.css("opacity")).css("opacity",0),n.show()}function n(t,i,a,n,o,s){var r=".mapster.tooltip",c=a+r;if(e.inArray(i,t)>=0)return n.off(c).on(c,function(e){(!o||o.call(this,e))&&(n.off(r),s&&s.call(this))}),{object:n,event:c}}function o(e,t,a,n,o){var s,r,c,l,u,h,p={};return o=o||{},t?(s=i.areaCorners(t,a,n,e.outerWidth(!0),e.outerHeight(!0)),p.left=s[0],p.top=s[1]):(p.left=o.left,p.top=o.top),p.left+=o.offsetx||0,p.top+=o.offsety||0,p.css=o.css,p.fadeDuration=o.fadeDuration,r=e,l={left:(c=p).left+"px",top:c.top+"px"},u=r.attr("data-opacity")||0,(0===parseInt(h=r.css("z-index"),10)||"auto"===h)&&(l["z-index"]=9999),r.css(l).addClass("mapster_tooltip"),c.fadeDuration&&c.fadeDuration>0?i.fader(r[0],0,u,c.fadeDuration):i.setOpacity(r[0],u),e}function s(e){return e?"string"==typeof e||e.jquery||i.isFunction(e)?e:e.content:null}function r(e){return e?"string"==typeof e||e.jquery||i.isFunction(e)?{content:e}:e:{}}e.extend(t.defaults,{toolTipContainer:'<div style="border: 2px solid black; background: #EEEEEE; width:160px; padding:4px; margin: 4px; -moz-box-shadow: 3px 3px 5px #535353; -webkit-box-shadow: 3px 3px 5px #535353; box-shadow: 3px 3px 5px #535353; -moz-border-radius: 6px 6px 6px 6px; -webkit-border-radius: 6px; border-radius: 6px 6px 6px 6px; opacity: 0.9;"></div>',showToolTip:!1,toolTip:null,toolTipFade:!0,toolTipClose:["area-mouseout","image-mouseout","generic-mouseout"],onShowToolTip:null,onHideToolTip:null}),e.extend(t.area_defaults,{toolTip:null,toolTipClose:null}),t.MapData.prototype.clearToolTip=function(){this.activeToolTip&&(this.activeToolTip.stop().remove(),this.activeToolTip=null,this.activeToolTipID=null,i.ifFunction(this.options.onHideToolTip,this))},t.AreaData.prototype.showToolTip=function(t,s){var r,c,l,u,h,p=this,d=p.owner,f=p.effectiveOptions();if(s=s?e.extend({},s):{},t=t||f.toolTip,c=s.closeEvents||f.toolTipClose||d.options.toolTipClose||"tooltip-click",h=void 0!==s.template?s.template:d.options.toolTipContainer,s.closeEvents="string"==typeof c?c=i.split(c):c,s.fadeDuration=s.fadeDuration||(d.options.toolTipFade?i.isNumeric(f.fadeDuration)?f.fadeDuration:d.options.fadeDuration:0),l=p.area?p.area:e.map(p.areas(),function(e){return e.area}),d.activeToolTipID!==p.areaId){d.clearToolTip();var g=i.isFunction(t)?t({key:this.key,target:l}):t;if(g)return d.activeToolTip=r=a(g,h,s.css),d.activeToolTipID=p.areaId,u=function(){d.clearToolTip()},n(c,"area-click","click",e(d.map),null,u),n(c,"tooltip-click","click",r,null,u),n(c,"image-mouseout","mouseout",e(d.image),function(e){return e.relatedTarget&&"AREA"!==e.relatedTarget.nodeName&&e.relatedTarget!==p.area},u),n(c,"image-click","click",e(d.image),null,u),o(r,l,d.image,s.container,s),i.ifFunction(d.options.onShowToolTip,p.area,{toolTip:r,options:{},areaOptions:f,key:p.key,selected:p.isSelected()}),r}},t.impl.tooltip=function(c,l){return new t.Method(this,function t(){var u,h,p,d,f,g=this;if(c){if(p=(h=e(c))&&h.length>0?h[0]:null,g.activeToolTipID===p||(g.clearToolTip(),!p))return;var m=s(l),v=i.isFunction(m)?m({key:this.key,target:h}):m;if(!v)return;d=(l=r(l)).closeEvents||g.options.toolTipClose||"tooltip-click",l.closeEvents="string"==typeof d?d=i.split(d):d,l.fadeDuration=l.fadeDuration||(g.options.toolTipFade?g.options.fadeDuration:0),f=function(){g.clearToolTip()},g.activeToolTip=u=a(v,l.template||g.options.toolTipContainer,l.css),g.activeToolTipID=p,n(d,"tooltip-click","click",u,null,f),n(d,"generic-mouseout","mouseout",h,null,f),n(d,"generic-click","click",h,null,f),g.activeToolTip=u=o(u,h,g.image,l.container,l)}else g.clearToolTip()},function t(){e.isPlainObject(c)&&!l&&(l=c),this.showToolTip(s(l),r(l))},{name:"tooltip",args:arguments,key:c}).go()}}(e)});